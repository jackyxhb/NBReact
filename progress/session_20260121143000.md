# Session: session_20260121143000

**Date:** 2026-01-21  
**Topic:** React Custom Hooks  
**Difficulty:** Medium  
**Average Score:** 95.6/100

---

## Q1: usePrevious Custom Hook

### Problem Statement

Create a custom hook that returns the previous value of a state or prop.

### Requirements

- Accept a value as parameter
- Return the previous value (undefined on first render)
- Use useRef to store the previous value
- Update the ref in useEffect after render

### Sample Usage

```javascript
const prevCount = usePrevious(count);
```

### Solution

```javascript
import { useRef, useEffect } from 'react';

function usePrevious(value) {
  const previous = useRef();

  useEffect(() => {
    previous.current = value;
  }, [value]);

  return previous.current;
}

export default usePrevious;
```

---

## Q2: useClickOutside Custom Hook

### Problem Statement

Create a custom hook that detects clicks outside of a specified element.

### Requirements

- Accept a ref to the target element
- Accept a callback function to execute on outside click
- Add event listener on mount, remove on unmount
- Check if click target is outside the ref element

### Sample Usage

```javascript
useClickOutside(dropdownRef, () => setIsOpen(false));
```

### Solution

```javascript
import { useEffect } from 'react';

function useClickOutside(ref, callback) {
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (ref.current && !ref.current.contains(event.target)) {
        callback();
      }
    };
    document.addEventListener('mousedown', handleClickOutside);

    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
    };
  }, [ref, callback]);
}

export default useClickOutside;
```

---

## Q3: useDebounce Custom Hook

### Problem Statement

Create a hook that debounces a value - delays updates until a pause in changes.

### Requirements

- Accept value and delay (ms) parameters
- Return the debounced value
- Use useState + useEffect with setTimeout
- Clear timeout on cleanup

### Sample Usage

```javascript
const debouncedQuery = useDebounce(query, 500);
```

### Solution

```javascript
import { useState, useEffect } from 'react';

function useDebounce(value, delay) {
  const [debounce, setDebounce] = useState(value);

  useEffect(() => {
    const timeoutId = setTimeout(() => {
      setDebounce(value);
    }, delay);

    return () => {
      clearTimeout(timeoutId);
    };
  }, [value, delay]);

  return debounce;
}

export default useDebounce;
```

---

## Q4: useWindowSize Custom Hook

### Problem Statement

Create a hook that tracks the browser window dimensions.

### Requirements

- Return an object with width and height
- Update on window resize
- Add resize listener on mount
- Remove listener on unmount
- Handle SSR (return 0 if window is not defined)

### Sample Usage

```javascript
const { width, height } = useWindowSize();
```

### Solution

```javascript
import { useState, useEffect } from 'react';

function useWindowSize() {
  const [dimension, setDimension] = useState(
    typeof window !== 'undefined'
      ? { width: window.innerWidth, height: window.innerHeight }
      : { width: 0, height: 0 }
  );

  useEffect(() => {
    const handleWindowResize = () => {
      setDimension({ width: window?.innerWidth, height: window?.innerHeight });
    };

    window?.addEventListener('resize', handleWindowResize);

    return () => {
      window?.removeEventListener('resize', handleWindowResize);
    };
  }, []);

  return dimension;
}

export default useWindowSize;
```

---

## Q5: useInterval Custom Hook

### Problem Statement

Create a hook that runs a callback at specified intervals with pause support.

### Requirements

- Accept callback and delay (ms or null) parameters
- Run callback repeatedly at the specified interval
- Stop interval when delay is null
- Use useRef to always call latest callback (avoid stale closure)
- Clear interval on unmount and when delay changes

### Sample Usage

```javascript
useInterval(
  () => {
    setCount((c) => c + 1);
  },
  isRunning ? 1000 : null
);
```

### Solution

```javascript
import { useEffect, useRef } from 'react';

function useInterval(callback, delay) {
  const savedCallback = useRef(null);

  useEffect(() => {
    savedCallback.current = callback;
  }, [callback]);

  useEffect(() => {
    const intervalID =
      delay &&
      setInterval(() => {
        savedCallback.current();
      }, delay);

    return () => {
      intervalID && clearInterval(intervalID);
    };
  }, [delay]);
}

export default useInterval;
```

---
